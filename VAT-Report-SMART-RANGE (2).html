<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light" />
    <title>ÿ™ŸÇÿ±Ÿäÿ± ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap"
        rel="stylesheet" />

    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css" />

</head>

<body>
    <noscript>
        <div
            style="
          padding: 16px;
          margin: 16px;
          border: 1px solid #e2e8f0;
          border-radius: 10px;
          background: #fff;
        ">
            Ÿáÿ∞ÿß ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± Ÿäÿ≠ÿ™ÿßÿ¨ ÿ™ŸÅÿπŸäŸÑ JavaScript ŸÑŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠.
        </div>
    </noscript>

    <div class="container">
        <div class="content-wrapper">
            <div class="page-header">
                <div class="header-content">
                    <div class="title-section">
                        <h1>ÿ™ŸÇÿ±Ÿäÿ± ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä</h1>

                        <p class="subtitle">ÿ™ŸÇÿ±Ÿäÿ± ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä</p>
                        <p class="date-range-display" aria-live="polite">
                            <span>ŸÖŸÜ:</span>
                            <span class="date-value" id="headerDateFrom"></span>
                            <span class="date-separator">‚Ä¢</span>
                            <span>ÿ•ŸÑŸâ:</span>
                            <span class="date-value" id="headerDateTo"></span>

                            <span class="date-value" id="headerDateTo"></span>
                        </p>
                    </div>

                    <div class="header-actions">
                        <div class="dropdown">
                            <button class="menu-btn-header" onclick="toggleMenu(event)" type="button"
                                aria-label="ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™">
                                ‚ãÆ
                            </button>
                            <div class="dropdown-menu" id="mainMenu" role="menu">
                                <div class="dropdown-item" id="exportMenuBtn" onclick="toggleExportMenu(event)"
                                    role="menuitem">
                                    üì• export <span
                                        style="margin-right:auto; opacity:0.75; font-weight:900;">‚ñº</span>
                                </div>
                                <div class="dropdown-submenu" id="exportSubmenu" role="menu">
                                    <div class="dropdown-item" onclick="exportReportSummary()" role="menuitem">ÿ™ÿµÿØŸäÿ± ŸÖÿ¨ŸÖÿπ
                                    </div>
                                    <div class="dropdown-item" onclick="exportReportDetailed()" role="menuitem">ÿ™ÿµÿØŸäÿ± ÿ™ŸÅÿµŸäŸÑŸä
                                    </div>
                                    <div class="dropdown-divider"></div>
                                    <div class="dropdown-item" onclick="printReport()" role="menuitem">üñ®Ô∏è ÿ∑ÿ®ÿßÿπÿ©</div>
                                </div>
                                <div class="dropdown-item" onclick="refreshData()" role="menuitem">
                                    üîÑ refresh
                                </div>
                                <div class="dropdown-divider"></div>
                                <div class="dropdown-item" onclick="openColumnModal()" role="menuitem">
                                    ‚â° customizecolumns </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="vat-modes" role="tablist" aria-label="Ÿàÿ∂ÿπ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©">
            </div>

            <div class="kpi-section">
                <div class="kpi-card output">
                    <div class="kpi-label"> sales_tax</div>
                    <div class="kpi-value" id="kpi-output-vat"> </div>
                    <div class="kpi-unit"></div>
                </div>
                <div class="kpi-card input">
                    <div class="kpi-label"> purchase_tax</div>
                    <div class="kpi-value" id="kpi-input-vat"></div>
                    <div class="kpi-unit"></div>
                </div>
                <div class="kpi-card net">
                    <div class="kpi-label"> net_tax_due</div>
                    <div class="kpi-value" id="kpi-net-vat"></div>
                    <div class="kpi-unit"></div>
                </div>
            </div>

            <div class="control-hub">
                <div class="control-row" style="margin-bottom: 12px; justify-content: flex-start">
                    <div class="smart-search-container" style="display: flex; width: auto; gap: 12px; align-items: center;">
                        <div class="search-with-chips simplified">
                            <div class="active-chips" id="activeChips"></div>
                            <div id="searchFilterBtn" class="search-filter-btn" style="display: none;"
                                onclick="toggleSearchFilter(event)">
                                <span id="searchFilterBtnText">ÿßÿÆÿ™ÿ± ÿßŸÑÿ≠ÿßŸÑÿ©...</span>
                                <span class="arrow">‚ñº</span>
                            </div>
                            <div class="search-input-wrap">
                                <input type="text" id="searchInput" class="search-input-with-chips"
                                    placeholder="üîç ÿßŸÑÿ®ÿ≠ÿ´ ŸàÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©..." oninput="handleSmartSearch()"
                                    onfocus="showSmartSearch()" autocomplete="off" />
                                <button type="button" class="search-clear-btn" id="searchClearBtn"
                                    onclick="clearSearch()">
                                    √ó
                                </button>
                            </div>
                            <select id="searchScopeSelect" class="search-scope-select"
                                onchange="onSearchScopeChange(this.value)">
                            </select>
                        </div>
                        <div class="smart-search-dropdown" id="smartSearchDropdown"></div>

                        <!-- Group By Dropdown -->
                        <div class="group-by-container" style="position: relative;">
                            <button type="button" class="group-by-toggle" id="groupByToggle"
                                onclick="toggleGroupByDropdown(event)">
                                <span style="font-size: 16px;">‚â°</span>
                                <span style="font-size: 13px; font-weight: 700;"> Group By</span>
                                <span style="font-size: 14px; font-weight: 900;">‚ñº</span>
                            </button>
                            <div class="group-by-dropdown" id="groupByDropdown">
                                <div class="group-by-header">Grouped By </div>
                                <div class="group-by-options" id="groupByOptions">
                                    <!-- Options will be populated dynamically -->
                                </div>
                            </div>
                        </div>

                        <!-- Filter By Dropdown -->
                        <div class="filter-by-container" style="position: relative;">
                            <button type="button" class="filter-by-toggle" id="filterByToggle"
                                onclick="toggleFilterByDropdown(event)">
                                <span style="font-size: 16px;">üîΩ</span>
                                <span style="font-size: 13px; font-weight: 700;"> filter by</span>
                                <span style="font-size: 14px; font-weight: 900;">‚ñº</span>
                            </button>
                            <div class="filter-by-dropdown" id="filterByDropdown">
                                <div class="filter-by-header"> filter by</div>
                                <div class="filter-by-options" id="filterByOptions">
                                    <!-- Nested Document Type Filter -->
                                    <div class="filter-nested-section">
                                        <div class="filter-nested-header" onclick="toggleNestedFilter('docType')">
                                            <span>document_type</span>
                                            <span class="filter-arrow" id="docTypeArrow">‚óÄ</span>
                                        </div>
                                        <div class="filter-nested-options" id="docTypeOptions" style="display: none;">
                                            <!-- Options will be populated dynamically -->
                                        </div>
                                    </div>

                                    <!-- Nested Tax Category Filter -->
                                    <div class="filter-nested-section">
                                        <div class="filter-nested-header" onclick="toggleNestedFilter('taxCategory')">
                                            <span>tax</span>
                                            <span class="filter-arrow" id="taxCategoryArrow">‚óÄ</span>
                                        </div>
                                        <div class="filter-nested-options" id="taxCategoryOptions"
                                            style="display: none;">
                                            <!-- Options will be populated dynamically -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-row"
                    style="
              display: flex;
              align-items: center;
              justify-content: flex-start;
              gap: 16px;
            ">
                    <div class="view-toggle-group" role="group" style="flex-shrink: 0">
                        <button id="tableViewSummaryBtn" class="view-toggle-btn active" type="button"
                            onclick="setItemsLinesView('summary')" title="ÿπÿ±ÿ∂ ŸÖÿ¨ŸÖŸëÿπ">
                            <span class="view-toggle-icon">‚ò∞</span>
                            <span class="view-toggle-text"> lines</span>
                        </button>
                        <button id="tableViewDetailedBtn" class="view-toggle-btn" type="button"
                            onclick="setItemsLinesView('detailed')" title="ÿπÿ±ÿ∂ ÿ™ŸÅÿµŸäŸÑŸä">
                            <span class="view-toggle-icon">‚îÅ</span>
                            <span class="view-toggle-text">grouped</span>
                        </button>
                    </div>

                    <div style="display: flex; align-items: center; gap: 12px">
                        <div style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  height: 40px;
                  padding: 0 14px;
                  background: white;
                  border: 1.5px solid var(--vp-border-light);
                  border-radius: var(--vp-radius);
                  box-shadow: var(--vp-shadow-sm);
                  cursor: pointer;
                  transition: all 0.2s;
                  flex-shrink: 0;
                "
                            onclick="openCalendarForRange()">
                            <span style="font-size: 16px">üóìÔ∏è</span>
                            <span
                                style="
                    font-size: 11px;
                    font-weight: 700;
                    color: var(--vp-text-muted);
                    white-space: nowrap;
                  ">time_period
                            </span>

                            <div id="dateBoxFrom" class="date-box filled">
                                <span
                                    style="
                      font-size: 11px;
                      font-weight: 700;
                      color: var(--vp-text-muted);
                    ">from:</span>
                                <span id="displayDateFrom" class="date-value"
                                    style="
                      font-size: 12px;
                      font-weight: 700;
                      color: var(--vp-accent);
                      min-width: 80px;
                      text-align: center;
                    "></span>
                            </div>

                            <span
                                style="
                    font-size: 14px;
                    color: var(--vp-text-muted);
                    font-weight: 900;
                  ">‚Üí</span>

                            <div id="dateBoxTo" class="date-box filled">
                                <span
                                    style="
                      font-size: 11px;
                      font-weight: 700;
                      color: var(--vp-text-muted);
                    ">to:</span>
                                <span id="displayDateTo" class="date-value"
                                    style="
                      font-size: 12px;
                      font-weight: 700;
                      color: var(--vp-accent);
                      min-width: 80px;
                      text-align: center;
                    "></span>
                            </div>

                            <input type="text" id="dateRangePicker" placeholder="ÿßÿÆÿ™ÿ± ÿßŸÑŸÅÿ™ÿ±ÿ©" readonly
                                style="position: absolute; opacity: 0; pointer-events: none" />
                            <input type="hidden" id="dateFrom" value="2025-01-01" />
                            <input type="hidden" id="dateTo" value="2025-12-31" />
                        </div>

                        <div
                            style="
                  display: flex;
                  height: 40px;
                  position: relative;
                ">
                            <div style="position: relative">
                                <button type="button" onclick="toggleQuickDates(event)"
                                    style="
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      min-width: 40px;
                      height: 40px;
                      padding: 0 10px;
                      background: white;
                      border: 1.5px solid var(--vp-border-light);
                      border-radius: var(--vp-radius);
                      cursor: pointer;
                      transition: all 0.2s;
                      flex-shrink: 0;
                      border-left: none;
                    "
                                    onmouseover="
                      this.style.background = 'var(--vp-bg-hover)';
                      this.style.borderColor = 'var(--vp-border-medium)';
                    "
                                    onmouseout="
                      this.style.background = 'white';
                      this.style.borderColor = 'var(--vp-border-light)';
                    "
                                    title="ŸÅÿ™ÿ±ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©">
                                    <span
                                        style="
                        font-size: 14px;
                        font-weight: 900;
                        color: var(--vp-text-secondary);
                      ">‚ñº</span>
                                </button>

                                <div id="quickDatesMenu"
                                    style="
                      display: none;
                      position: absolute;
                      top: calc(100% + 4px);
                      right: 0;
                      background: white;
                      border: 2px solid var(--vp-border-light);
                      border-radius: var(--vp-radius);
                      box-shadow: var(--vp-shadow-lg);
                      z-index: 9999;
                      min-width: 200px;
                    ">
                                    <!-- Date presets will be injected dynamically by script.js -->
                                </div>
                            </div>

                            <button type="button" onclick="resetDateRange()"
                                style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    min-width: 40px;
                    height: 40px;
                    padding: 0;
                    background: white;
                    border: 1.5px solid var(--vp-border-light);
                    border-radius: var(--vp-radius) ;
                    cursor: pointer;
                    transition: all 0.2s;
                    flex-shrink: 0;
                  "
                                onmouseover="
                    this.style.background = 'var(--vp-bg-hover)';
                    this.style.borderColor = 'var(--vp-border-medium)';
                  "
                                onmouseout="
                    this.style.background = 'white';
                    this.style.borderColor = 'var(--vp-border-light)';
                  "
                                title="ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ">
                                <span style="font-size: 16px; line-height: 1">‚Üª</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="bulkActions" class="control-hub"
                style="
            display: none;
            margin-top: -16px;
            margin-bottom: var(--vp-space-8);
            padding: 14px 16px;
          ">
                <div class="control-row"
                    style="
              margin-bottom: 0;
              justify-content: space-between;
              flex-wrap: wrap;
            ">
                    <div
                        style="
                display: flex;
                align-items: center;
                gap: 10px;
                flex-wrap: wrap;
              ">
                        <strong style="font-size: 13px">
                            multi_select
                        </strong>
                        <span
                            style="
                  font-size: 12px;
                  font-weight: 800;
                  color: var(--vp-text-secondary);
                  background: var(--vp-bg-hover);
                  border: 1px solid var(--vp-border-light);
                  padding: 4px 10px;
                  border-radius: 999px;
                ">
                            selected: <span id="selectedCount">0</span>
                        </span>
                    </div>
                    <div
                        style="
                display: flex;
                align-items: center;
                gap: 10px;
                flex-wrap: wrap;
              ">
                        <button type="button" class="icon-only-btn success" onclick="sendSelectedToZatca()"
                            title="ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑŸáŸäÿ¶ÿ©">
                            ‚¨ÜÔ∏è
                        </button>
                        <button type="button" class="icon-only-btn" onclick="exportSelectedRows()"
                            title="ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÖÿ≠ÿØÿØ">
                            üì•
                        </button>
                        <button type="button" class="icon-only-btn danger" onclick="deleteSelectedRows()"
                            title="ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≠ÿØÿØ">
                            üóëÔ∏è
                        </button>
                        <button type="button" class="icon-only-btn danger" onclick="clearSelection()"
                            title="ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿØ">
                            ‚úï
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-container" aria-label="ÿ¨ÿØŸàŸÑ ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©">
                <table id="vatTable">
                    <thead>
                        <tr>
                            <th data-col="expand" style="width: 50px" id="expandColumnHeader" role="button"
                                tabindex="0" title="ŸÅÿ™ÿ≠/ÿ∑Ÿä ÿ¨ŸÖŸäÿπ ÿ≥ÿ∑Ÿàÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™" onclick="toggleExpandAllFromHeader()"
                                onkeydown="
                    if (event.key === 'Enter' || event.key === ' ') {
                      event.preventDefault();
                      toggleExpandAllFromHeader();
                    }
                  ">
                            </th>
                            <th data-col="select">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()"
                                    aria-label="ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ" />
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="date">
                                date
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="createdDate">
                                created_at
                                <div class="resize-handle"></div>
                            </th>

                            <th data-col="docNo">
                                document_number
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'docNo')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="docType">
                                type

                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'type')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>

                            <th data-col="revenueAccount">
                                account_name
                                <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'accountName')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="reference">
                                reference
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'reference')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="taxCategory">
                                tax_category
                                <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'taxCategory')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="taxCode">
                                tax_code
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'taxCode')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="rate">
                                tax_rate
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'rate')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="base">
                                ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿ∫Ÿäÿ± ÿ¥ÿßŸÖŸÑ ÿ∂ÿ±Ÿäÿ®ÿ©

                            </th>
                            <th data-col="vat">
                                ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©

                            </th>
                            <th data-col="total">
                                ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿ¥ÿßŸÖŸÑ ÿ∂ÿ±Ÿäÿ®ÿ©

                            </th>
                            <th data-col="taxType">
                                tax_type
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'taxType')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="branch">
                                project
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'project')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="attachments">
                                attachments
                                <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'attachments')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="notes">
                                notes
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'notes')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="paymentStatus">
                                the_payment_status
                                <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'paymentStatus')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="createdBy">
                                created_by <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'createdBy')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="postingStatus">
                                carry_forward_status
                                <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'postingStatus')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="zatcaStatus">
                                sent_status <span class="column-filter-btn"
                                    onclick="toggleColumnFilter(event, 'zatcaStatus')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="vatReturn">
                                listed_status
                                <span class="column-filter-btn" onclick="toggleColumnFilter(event, 'vatReturn')">‚ñº</span>
                                <div class="resize-handle"></div>
                            </th>
                            <th data-col="actions">actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="16"> loading</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="8" style="text-align: right; font-weight: 900">
                                total
                            </td>
                            <td id="total-base" style="font-weight: 900">0.00</td>
                            <td id="total-vat" style="font-weight: 900">0.00</td>
                            <td id="total-amount" style="font-weight: 900">0.00</td>
                            <td colspan="5"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="page-footer">
                <div class="footer-info">
                    <span>show:</span>
                    <select id="perPageSelect" onchange="changePerPage(this.value)"
                        style="
                padding: 10px 14px;
                border: 1.5px solid var(--vp-border-medium);
                border-radius: var(--vp-radius-sm);
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
              ">
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="20" selected>20</option>
                        <option value="50">50</option>
                    </select>
                    <span>|</span>
                    <span>show <span id="pageStart">1</span>-<span id="pageEnd">20</span> ŸÖŸÜ
                        <span id="totalCount">20</span></span>
                </div>
                <div class="pagination">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <div class="details-panel-overlay" id="detailsOverlay" onclick="closeDetailsPanel()"></div>
        <div class="details-panel" id="detailsPanel" role="dialog" aria-label="ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ">
            <div class="details-header">
                <div class="details-header-content">
                    <div class="details-doc-number" id="detailsDocNumber">INV-1001</div>
                    <div class="details-doc-type-badge" id="detailsDocTypeBadge">
                        ŸÅÿßÿ™Ÿàÿ±ÿ© ŸÖÿ®Ÿäÿπÿßÿ™
                    </div>
                </div>
                <button class="details-close-btn" onclick="closeDetailsPanel()" type="button" aria-label="ÿ•ÿ∫ŸÑÿßŸÇ">
                    √ó
                </button>
            </div>

            <div class="details-body">
                <div class="details-section">
                    <div class="details-section-title">üìã ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ£ÿ≥ÿßÿ≥Ÿäÿ©</div>
                    <div class="details-grid">
                        <div class="details-item">
                            <span class="details-label">üìÖ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</span>
                            <span class="details-value" id="detailsDate">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">üë§ ÿßŸÑÿ∑ÿ±ŸÅ</span>
                            <span class="details-value" id="detailsParty">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">üè¢ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ</span>
                            <span class="details-value" id="detailsBranch">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">üîó ÿßŸÑŸÖÿ±ÿ¨ÿπ</span>
                            <span class="details-value" id="detailsReference">-</span>
                        </div>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-section-title">üí∞ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫</div>
                    <div class="details-amounts">
                        <div class="details-amount-row">
                            <span class="details-amount-label">ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿÆÿßÿ∂ÿπ ŸÑŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-amount-value" id="detailsBase">0.00</span>
                        </div>
                        <div class="details-amount-row">
                            <span class="details-amount-label">ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-amount-value" id="detailsRate">0%</span>
                        </div>
                        <div class="details-amount-row">
                            <span class="details-amount-label">ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-amount-value accent" id="detailsVAT">0.00</span>
                        </div>
                        <div class="details-amount-row total">
                            <span class="details-amount-label">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä</span>
                            <span class="details-amount-value" id="detailsTotal">0.00</span>
                        </div>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-section-title">üì¶ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™</div>
                    <div class="details-items" id="detailsItems">
                        <p class="details-notes-empty">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿ™ÿ¨ÿßÿ™</p>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-section-title">üìä ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</div>
                    <div class="details-grid">
                        <div class="details-item">
                            <span class="details-label">ŸÅÿ¶ÿ© ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-value" id="detailsTaxCategory">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">ŸÉŸàÿØ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-value" id="detailsTaxCode">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">ŸÜŸàÿπ ÿßŸÑÿ∂ÿ±Ÿäÿ®ÿ©</span>
                            <span class="details-value" id="detailsTaxType">-</span>
                        </div>
                        <div class="details-item">
                            <span class="details-label">ÿßŸÑÿ≠ÿßŸÑÿ©</span>
                            <span class="details-badge" id="detailsStatus">ŸÜÿ¥ÿ∑</span>
                        </div>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-section-title">üìù ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</div>
                    <div class="details-notes" id="detailsNotes">
                        <p class="details-notes-empty">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™</p>
                    </div>
                </div>

                <div class="details-section">
                    <div class="details-section-title">üìé ÿßŸÑŸÖÿ±ŸÅŸÇÿßÿ™</div>
                    <div class="details-attachments" id="detailsAttachments">
                        <span class="details-attachments-count">0 ŸÖÿ±ŸÅŸÇ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay" id="columnModal" onclick="closeColumnModal()">
            <div class="modal" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <div class="modal-title">ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ£ÿπŸÖÿØÿ©</div>
                    <button class="modal-close" onclick="closeColumnModal()" type="button">
                        √ó
                    </button>
                </div>
                <div class="modal-body">
                    <input type="text" class="modal-search" placeholder="ÿ®ÿ≠ÿ´..."
                        oninput="searchColumns(this.value)" />
                    <div id="columnsList"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn-save" onclick="saveColumns()" type="button">
                        ÿ≠ŸÅÿ∏
                    </button>
                    <button class="btn-secondary" onclick="resetColumns()" type="button">
                        ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>
            <div class="loading-subtext" id="loadingSubtext">ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±</div>
        </div>
    </div>

    <div class="tooltip" id="globalTooltip"></div>

    <div id="toastContainer"
        style="
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 10px;
        pointer-events: none;
      ">
    </div>
</body>
<script src="./script.js"></script>

</html>